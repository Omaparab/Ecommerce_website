{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equipment Reselling</title>
    <link rel="stylesheet" href="{% static 'css/products/drafter.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Header Section from Home -->
    <header>
        <div class="header-content">
            <div class="logo">
                <img src="{% static 'img/logo.png' %}" alt="Our Logo">
            </div>
            <div class="search-bar">
                <input type="search" placeholder="Find Drafter, Calculator, and more...">
            </div>
            <div class="actions">
                <div class="department-selector">
                    <label for="departments" style="margin-right: 10px;">Departments:</label>
                    <select id="departments" style="-webkit-appearance: none; -moz-appearance: none; appearance: none;">
                        <option value="cmpn">CMPN</option>
                        <option value="it">IT </option>
                        <option value="extc">EXTC </option>
                        <option value="mechanical">MECHANICAL </option>
                        <option value="electrical">ELECTRICAL </option>
                    </select>
                </div>
                <br><br>
                <div class="sell-btn">
                    <button>+ SELL</button>
                </div>
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="#">ALL CATEGORIES</a></li>
                <li>
                    <a href="#">Mechanical Equipments</a>
                    <select>
                        <option value="drafter">Drafter</option>
                        <option value="scale">Scale</option>
                        <option value="geometrybox">Geometry Box</option>
                        <option value="workequipment">Workshop Equipment</option>
                    </select>
                </li>
                <li>
                    <a href="#">Computers Equipments</a>
                    <select>
                        <option value="laptop">Laptop</option>
                        <option value="mouse">Mouse</option>
                        <option value="earphones">Earphones</option>
                    </select>
                </li>
                <li><a href="#">Mobile Phones</a></li>
                <li>
                    <a href="#">Notebooks</a>
                    <select>
                        <option value="maths">Maths</option>
                        <option value="dsgt">Dsgt</option>
                        <option value="aoa">Aoa</option>
                        <option value="dlcoa">Dlcoa</option>
                    </select>
                </li>
                <li>
                    <a href="#">Books</a>
                    <select>
                        <option value="kumbhojkar">Kumbhojkar</option>
                        <option value="rema">Rema Thareja</option>
                    </select>
                </li>
                <li><a href="#">For Sale: Equipments</a></li>
                <li><a href="#">For Rent: Equipments</a></li>
            </ul>
        </nav>
    </header>

    <!-- Product Detail Section -->
    <main>
        <section class="product-detail">
            <!-- Product Image Section -->
            <div class="product-image">
                <img src="{% static 'img/drafter.png' %}" alt="Drafter for Engineering Graphics">
            </div>

            <!-- Product Information Section -->
            <div class="product-info">
                <h1>Drafter for Engineering Graphics</h1>
                <p class="price">₹ 600 <span class="old-price">₹ 800</span></p>
                <p class="availability"><strong>Availability:</strong> In Stock</p>
                <p class="seller"><strong>Seller:</strong> Ecom Marketplace</p>
                <p class="ratings">
                    <strong>Rating:</strong> 
                    <span>★★★★☆</span> 
                    (45 customer reviews)
                </p>
                <hr>

                <!-- Product Description -->
                <div class="description">
                    <h2>Product Description</h2>
                    <p>This high-quality engineering drafter is a must-have tool for students and professionals alike. It is meticulously crafted to ensure precision in technical drawing and design. With robust metal components and smooth adjustable joints, this drafter guarantees durability and ease of use.</p>
                    <ul>
                        <li>Brand: ABC Engineering</li>
                        <li>Material: High-grade metal and plastic</li>
                        <li>Weight: 500g, lightweight for easy handling</li>
                        <li>Includes: Adjustable drafter arm, rulers, protractor, and set square</li>
                        <li>Ideal for: Engineering students, architects, and designers</li>
                        <li>Dimensions: 15 x 12 inches</li>
                    </ul>
                </div>

                <!-- Additional Features -->
                <div class="features">
                    <h3>Additional Features</h3>
                    <ul>
                        <li>Precision alignment for accurate angles</li>
                        <li>Durable components designed to last for years</li>
                        <li>Scratch-resistant metal arms</li>
                        <li>Easy setup and dismantling for convenient use in classrooms or workshops</li>
                    </ul>
                </div>

                <!-- Purchase Section -->
                <div class="purchase-section">
                    <label for="quantity">Quantity:</label>
                    <input type="number" id="quantity" value="1" min="1">
                    
                    <!-- Add this HTML for the Add to Cart button -->
                    <button class="add-to-cart-btn" data-product-id="drafter123" data-product-name="Drafter for Engineering Graphics" data-product-price="600" data-product-image="drafter.jpeg">
                        Add to Cart
                    </button>
                    {% if login_visited %}
                    <a href="{% url 'cart' %}">View Cart</a>
                    {% else %}
                    <a href="{% url 'login' %}" onclick="nologin()">View Cart</a>
                    {% endif %}
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer>
        <p>Copyright © 2024 All rights reserved | Ecom</p>
    </footer>

    <script>
        function nologin(){
            alert('Login to buy our products!!')
        }

        // Function to add product to the cart
        function addToCart(product) {
            // Retrieve existing cart from localStorage or initialize an empty cart
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
        
            // Check if the product already exists in the cart
            const existingProduct = cart.find(item => item.id === product.id);
            if (existingProduct) {
                // If it exists, increase the quantity
                existingProduct.quantity += product.quantity;
            } else {
                // If it's a new product, add it to the cart
                cart.push(product);
            }
        
            // Save the updated cart back to localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
        
            // Show a confirmation message
            alert('Product added to cart!');
        }
        
        // Attach event listener to the "Add to Cart" button
        document.querySelector('.add-to-cart-btn').addEventListener('click', function() {
            const productId = this.getAttribute('data-product-id');
            const productName = this.getAttribute('data-product-name');
            const productPrice = parseFloat(this.getAttribute('data-product-price'));
            const productImage = this.getAttribute('data-product-image');
            const quantity = parseInt(document.getElementById('quantity').value);
            
            // Ensure quantity is greater than zero
            if (quantity > 0) {
                // Create a product object
                const product = {
                    id: productId,
                    name: productName,
                    price: productPrice,
                    image: productImage,
                    quantity: quantity
                };
        
                // Call the addToCart function to store the product in localStorage
                addToCart(product);
            } else {
                alert('Please enter a valid quantity.');
            }
        });
    </script>
        
</body>

</html>
